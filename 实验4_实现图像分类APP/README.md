<p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">下载</font><font face="Calibri">TEL Classify </font><font face="宋体">原代码 编译</font><font face="Calibri">gradle</font><font face="宋体">后运行程序</font></span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">首次运行后请求拍照录像权限</font> </span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic1.png" /></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">权限授权后成功运行</span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic2.png" /></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">在</font><font face="Calibri">gradle.start</font><font face="宋体">中添加 </font><font face="Calibri">TensorFlow Lite Model</font></span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><div><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic3.png" /><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic4.png" /></div><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">检查代码中的</font><font face="Calibri">TODO</font><font face="宋体">项 然后再</font><font face="Calibri">TODO</font><font face="宋体">中添加训练化模型代码</font></span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><div><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic5.png" /></div><div>导入依赖</div><div></div></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">import </span>org.tensorflow.lite.examples.classification.ml.FlowerModel<br /><span style="color:#cc7832;">import </span>org.tensorflow.lite.examples.classification.ui.RecognitionAdapter</pre><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">在</font><font face="Calibri">TODO1</font><font face="宋体">下添加</font></span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">private val </span><span style="color:#9876aa;">flowerModel </span>= FlowerModel.newInstance<span style="color:#e8ba36;">(</span>ctx<span style="color:#e8ba36;">)</span><span style="color:#e8ba36;"><br /></span></pre><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">在</font><font face="Calibri">TODO2</font><font face="宋体">下添加</font></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">val </span>tfImage = TensorImage.fromBitmap<span style="color:#e8ba36;">(</span>toBitmap<span style="color:#54a857;">(</span>imageProxy<span style="color:#54a857;">)</span><span style="color:#e8ba36;">)</span><span style="color:#e8ba36;"><br /></span></pre><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">在</font><font face="Calibri">TODO3</font><font face="宋体">下添加</font></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">val </span>outputs = <span style="color:#9876aa;">flowerModel</span>.process<span style="color:#e8ba36;">(</span>tfImage<span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">    </span>.<span style="color:#9876aa;font-style:italic;">probabilityAsCategoryList</span>.<span style="color:#ffc66d;font-style:italic;">apply </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">       </span><span style="color:#ffc66d;font-style:italic;">sortByDescending </span><span style="font-weight:bold;">{ it</span>.<span style="color:#9876aa;font-style:italic;">score </span><span style="font-weight:bold;">} </span><span style="color:#808080;">// Sort with highest confidence first<br /></span><span style="color:#808080;">    </span><span style="font-weight:bold;">}</span>.<span style="color:#ffc66d;font-style:italic;">take</span><span style="color:#e8ba36;">(</span><span style="color:#9876aa;font-style:italic;">MAX_RESULT_DISPLAY</span><span style="color:#e8ba36;">) </span><span style="color:#808080;">// take the top results<br /></span></pre><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><font face="宋体">在</font><font face="Calibri">TODO4</font><font face="宋体">下添加</font></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">for </span><span style="color:#e8ba36;">(</span>output <span style="color:#cc7832;">in </span>outputs<span style="color:#e8ba36;">) </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">    </span>items.add<span style="color:#54a857;">(</span>Recognition<span style="color:#359ff4;">(</span>output.<span style="color:#9876aa;font-style:italic;">label</span><span style="color:#cc7832;">, </span>output.<span style="color:#9876aa;font-style:italic;">score</span><span style="color:#359ff4;">)</span><span style="color:#54a857;">)<br /></span><span style="color:#5060bb;">}<br /></span></pre><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">注释掉原模拟概率代码</span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#808080;">///for (i in 0 until MAX_RESULT_DISPLAY){<br /></span><span style="color:#808080;">///    items.add(Recognition("Fake label $i", Random.nextFloat()))<br /></span><span style="color:#808080;">///}<br /></span></pre><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">编译成功后</span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">连接手机进行测试</span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">郁金香</span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic6.png" /></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">向日葵</span><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic7.png" /></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">玫瑰</span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic8.png" /></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">雏菊</span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic9.png" /></p><p class="MsoNormal"><span style="mso-spacerun:'yes';font-family:宋体;mso-ascii-font-family:Calibri;
mso-hansi-font-family:Calibri;mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;
mso-font-kerning:1.0000pt;">蒲公英</span><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C4_%E5%AE%9E%E7%8E%B0%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BBAPP/images/pic10.png" /></p><br /> 