<p class="MsoNormal"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="color: rgb(31, 35, 40); font-size: 16px; font-weight: var(--base-text-weight-semibold, 600);" class="">实验2_2_构建cameraX应用</span><span style="font-size: 10.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体"><b>在</b></font><font face="黑体"><b>activity.xml中设置俩个按钮用于拍摄和录像</b></font><o:p></o:p></span></p><p class="pre" style="mso-pagination:widow-orphan;background:rgb(43,43,43);"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&lt;Button<br />&nbsp;&nbsp;&nbsp;&nbsp;android:id="@+id/image_capture_button"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_width="110dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_height="110dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_marginBottom="50dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_marginEnd="50dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:elevation="2dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:text="@string/take_photo"<br />&nbsp;&nbsp;&nbsp;&nbsp;app:layout_constraintBottom_toBottomOf="parent"<br />&nbsp;&nbsp;&nbsp;&nbsp;app:layout_constraintLeft_toLeftOf="parent"<br />&nbsp;&nbsp;&nbsp;&nbsp;app:layout_constraintEnd_toStartOf="@id/vertical_centerline" /&gt;<br /><br />&lt;Button<br />&nbsp;&nbsp;&nbsp;&nbsp;android:id="@+id/video_capture_button"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_width="110dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_height="110dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_marginBottom="50dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:layout_marginStart="50dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:elevation="2dp"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:text="@string/start_capture"<br />&nbsp;&nbsp;&nbsp;&nbsp;app:layout_constraintBottom_toBottomOf="parent"<br />&nbsp;&nbsp;&nbsp;&nbsp;app:layout_constraintStart_toEndOf="@id/vertical_centerline" /&gt;</span><span style="font-family: 黑体; color: rgb(169, 183, 198); font-size: 9.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-family: 黑体; font-size: 10.5pt;">效果图如下<o:p></o:p></span></p><p class="MsoNormal"><br /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-family: 黑体; font-size: 10.5pt;"><b>关键代码</b><o:p></o:p></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体"><b>在</b></font><font face="黑体"><b>Gradle.app中添加CAMERA依赖组件用于支持相机功能的实现</b></font><o:p></o:p></span></p><p class="pre" style="mso-pagination:widow-orphan;background:rgb(43,43,43);"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">def camerax_version = "1.1.0-beta02"<br />implementation 'androidx.camera:camera-core:1.1.0-beta02'<br />implementation 'androidx.camera:camera-camera2:1.1.0-beta02'<br />implementation "androidx.camera:camera-lifecycle:1.1.0-beta02"<br />implementation "androidx.camera:camera-video:1.1.0-beta02"<br />implementation "androidx.camera:camera-view:1.1.0-beta02"<br />implementation "androidx.camera:camera-extensions:1.1.0-beta02"</span><span style="font-family: 黑体; color: rgb(169, 183, 198); font-size: 9.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体"><b>在</b></font><font face="黑体"><b>Androidmainfest.xml中添加权限申请</b></font><o:p></o:p></span></p><p class="pre" style="mso-pagination:widow-orphan;background:rgb(43,43,43);"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&lt;uses-feature android:name="android.hardware.camera.any" /&gt;<br />&lt;uses-permission android:name="android.permission.CAMERA" /&gt;<br />&lt;uses-permission android:name="android.permission.RECORD_AUDIO" /&gt;<br />&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"<br />&nbsp;&nbsp;&nbsp;&nbsp;android:maxSdkVersion="28" /&gt;</span><span style="font-family: 黑体; color: rgb(169, 183, 198); font-size: 9.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体"><b>在</b></font><font face="黑体"><b>MainActivity.kt中设定startCamera用于启动摄像机</b></font><o:p></o:p></span></p><p class="pre" style="mso-pagination:widow-orphan;background:rgb(43,43,43);"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">private fun startCamera() {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//。创建 ProcessCameraProvider 的实例。这用于将相机的生命周期绑定到生命周期所有者。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">// 这消除了打开和关闭相机的任务，因为 CameraX 具有生命周期感知能力。</font><br />&nbsp;&nbsp;&nbsp;&nbsp;val cameraProviderFuture = ProcessCameraProvider.getInstance(this)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//向 cameraProviderFuture 添加监听器。添加 Runnable 作为一个参数。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">// 添加 ContextCompat.getMainExecutor() 作为第二个参数。这将返回一个在主线程上运行的 Executor。</font><br />&nbsp;&nbsp;&nbsp;&nbsp;cameraProviderFuture.addListener(</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">Runnable</span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">// 添加 ProcessCameraProvider。它用于将相机的生命周期绑定到应用进程中的 LifecycleOwner<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val cameraProvider: ProcessCameraProvider = cameraProviderFuture.get()<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// 初始化 Preview 对象，在其上调用 build，从取景器中获取 Surface 提供程序，然后在预览上进行设置。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val preview = Preview.Builder()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">also </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><font face="黑体">it</font></span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.setSurfaceProvider(viewBinding.viewFinder.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">surfaceProvider</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">//创建 VideoCapture 用例<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val recorder = Recorder.Builder()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.setQualitySelector(QualitySelector.from(Quality.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">HIGHEST</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">))<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;videoCapture = VideoCapture.withOutput(recorder)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;imageCapture = ImageCapture.Builder()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build()<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val imageAnalyzer = ImageAnalysis.Builder()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">also </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><font face="黑体">it</font></span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.setAnalyzer(cameraExecutor, LuminosityAnalyzer </span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{ </span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">luma </span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">-&gt;</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">Log.d(TAG, "Average luminosity: $luma")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">// 创建 CameraSelector 对象，然后选择 DEFAULT_BACK_CAMERA。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val cameraSelector = CameraSelector.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">DEFAULT_BACK_CAMERA</span></i><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></i><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></i><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">try {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Unbind use cases before rebinding<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameraProvider.unbindAll()<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Bind use cases to camera<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cameraProvider.bindToLifecycle(this, cameraSelector, preview,imageCapture, videoCapture)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch(exc: Exception) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.e(TAG, "Use case binding failed", exc)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, ContextCompat.getMainExecutor(this))<br />}</span><span style="font-family: 黑体; color: rgb(169, 183, 198); font-size: 9.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体"><b>在</b></font><font face="黑体"><b>MainActivity.kt中设定takePhoto用于拍照</b></font><o:p></o:p></span></p><p class="pre" style="mso-pagination:widow-orphan;background:rgb(43,43,43);"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">private fun takePhoto() {<br />&nbsp;&nbsp;&nbsp;&nbsp;// 如果用例为 null，退出函数。如果在设置图片拍摄之前点按“photo”按钮，它将为 null。<br />&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">// 如果没有 return 语句，应用会在该用例为 null 时崩溃</font><br />&nbsp;&nbsp;&nbsp;&nbsp;val imageCapture = imageCapture ?: return<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;// 创建用于保存图片的 MediaStore 内容值。使用时间戳，确保 MediaStore 中的显示名是唯一的<br />&nbsp;&nbsp;&nbsp;&nbsp;val name = SimpleDateFormat(FILENAME_FORMAT, Locale.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">US</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.format(System.currentTimeMillis())<br />&nbsp;&nbsp;&nbsp;&nbsp;val contentValues = ContentValues().</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">apply </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">put(MediaStore.MediaColumns.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">DISPLAY_NAME</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, name)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put(MediaStore.MediaColumns.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">MIME_TYPE</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, "image/jpeg")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Build.VERSION.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">SDK_INT </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&gt; Build.VERSION_CODES.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">P</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put(MediaStore.Images.Media.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">RELATIVE_PATH</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, "Pictures/CameraX-Image")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">// 创建一个 OutputFileOptions 对象。在该对象中，可以指定所需的输出内容<br />&nbsp;&nbsp;&nbsp;&nbsp;val outputOptions = ImageCapture.OutputFileOptions<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">.Builder</font>(</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">contentResolver</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MediaStore.Images.Media.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">EXTERNAL_CONTENT_URI</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contentValues)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build()<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;// imageCapture 对象调用 takePicture()。传入 outputOptions、执行器和保存图片时使用的回调<br />&nbsp;&nbsp;&nbsp;&nbsp;imageCapture.takePicture(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outputOptions,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ContextCompat.getMainExecutor(this),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">object </font>: ImageCapture.OnImageSavedCallback {<br />&nbsp;&nbsp;&nbsp;&nbsp;//如果图片拍摄失败或保存图片失败，添加错误情况以记录失败。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;override fun onError(exc: ImageCaptureException) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.e(TAG, "Photo capture failed: ${exc.message}", exc)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;//如果拍摄未失败，即表示照片拍摄成功！将照片保存到之前创建的文件中，<br />&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">// 显示消息框，让用户知道照片已拍摄成功，并输出日志语句。</font><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;override fun<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onImageSaved(output: ImageCapture.OutputFileResults){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val msg = "Photo capture succeeded: ${output.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">savedUri</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Toast.makeText(</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">baseContext</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, msg, Toast.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">LENGTH_SHORT</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">).show()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.d(TAG, msg)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;)<br />}</span><span style="font-family: 黑体; color: rgb(169, 183, 198); font-size: 9.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体"><b>在</b></font><font face="黑体"><b>MainActivity.kt中设定startcamera用于拍摄录像</b></font><o:p></o:p></span></p><p class="pre" style="mso-pagination:widow-orphan;background:rgb(43,43,43);"><span style="font-family: &quot;Microsoft Yahei&quot;;"><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">private fun captureVideo() {<br />&nbsp;&nbsp;&nbsp;&nbsp;//检查是否已创建 VideoCapture 用例：如果尚未创建，则不执行任何操作。<br />&nbsp;&nbsp;&nbsp;&nbsp;val videoCapture = this.videoCapture ?: return<br />&nbsp;&nbsp;&nbsp;&nbsp;//在 CameraX 完成请求操作之前，停用界面；在后续步骤中，它会在已注册的 VideoRecordListener 内重新启用。<br />&nbsp;&nbsp;&nbsp;&nbsp;viewBinding.videoCaptureButton.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">isEnabled </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">= false<br />&nbsp;&nbsp;&nbsp;&nbsp;//如果有正在进行的录制操作，将其停止并释放当前的 recording。当所捕获的视频文件可供应用使用时，我们会收到通知。<br />&nbsp;&nbsp;&nbsp;&nbsp;val curRecording = recording<br />&nbsp;&nbsp;&nbsp;&nbsp;if (curRecording != null) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Stop the current recording session.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 黑体; font-size: 9.5pt; background: rgb(34, 60, 35); color: rgb(255, 255, 255);"><font face="黑体">curRecording</font></span><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.stop()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recording = null<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">return</font><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;//为了开始录制，创建一个新的录制会话。首先，创建预定的 MediaStore 视频内容对象，将系统时间戳作为显示名（以便可以捕获多个视频）<br />&nbsp;&nbsp;&nbsp;&nbsp;val name = SimpleDateFormat(FILENAME_FORMAT, Locale.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">US</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.format(System.currentTimeMillis())<br />&nbsp;&nbsp;&nbsp;&nbsp;val contentValues = ContentValues().</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">apply </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">put(MediaStore.MediaColumns.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">DISPLAY_NAME</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, name)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put(MediaStore.MediaColumns.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">MIME_TYPE</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, "video/mp4")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (Build.VERSION.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">SDK_INT </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&gt; Build.VERSION_CODES.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">P</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put(MediaStore.Video.Media.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">RELATIVE_PATH</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, "Movies/CameraX-Video")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">//使用外部内容选项创建 MediaStoreOutputOptions.Builder。<br />&nbsp;&nbsp;&nbsp;&nbsp;val mediaStoreOutputOptions = MediaStoreOutputOptions<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">.Builder</font>(</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">contentResolver</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, MediaStore.Video.Media.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">EXTERNAL_CONTENT_URI</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;//将创建的视频 contentValues 设置为 MediaStoreOutputOptions.Builder，并构建我们的 MediaStoreOutputOptions 实例。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.setContentValues(contentValues)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build()<br />&nbsp;&nbsp;&nbsp;&nbsp;//将输出选项配置为 VideoCapture 的 Recorder 并启用录音：<br />&nbsp;&nbsp;&nbsp;&nbsp;recording = videoCapture.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">output</span></i><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></i><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.prepareRecording(this, mediaStoreOutputOptions)<br />&nbsp;&nbsp;&nbsp;&nbsp;//在此录音中启用音频<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">apply </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">if (PermissionChecker.checkSelfPermission(this@MainActivity,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Manifest.permission.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">RECORD_AUDIO</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">) ==<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="黑体">PermissionChecker.</font></span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">PERMISSION_GRANTED</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;withAudioEnabled()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">//启动这项新录制内容，并注册一个 lambda VideoRecordEvent 监听器。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.start(ContextCompat.getMainExecutor(this)) </span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{ </span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">recordEvent </span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">-&gt;</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">when(recordEvent) {<br />&nbsp;&nbsp;&nbsp;&nbsp;//当相机设备开始请求录制时，将“Start Capture”按钮文本切换为“Stop Capture”。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is VideoRecordEvent.Start -&gt; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;viewBinding.videoCaptureButton.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">apply </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">text </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">= getString(R.string.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">stop_capture</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">isEnabled </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">= true<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}<br />&nbsp;&nbsp;&nbsp;&nbsp;//完成录制后，用消息框通知用户，并将“Stop Capture”按钮切换回“Start Capture”，然后重新启用它：<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is VideoRecordEvent.Finalize -&gt; {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!</span><span style="font-family: 黑体; font-size: 9.5pt; background: rgb(34, 60, 35); color: rgb(255, 255, 255);"><font face="黑体">recordEvent</font></span><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.hasError()) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val msg = "Video capture succeeded: " +<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"${</span><span style="font-family: 黑体; font-size: 9.5pt; background: rgb(34, 60, 35); color: rgb(255, 255, 255);"><font face="黑体">recordEvent</font></span><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">outputResults</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">outputUri</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Toast.makeText(</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">baseContext</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">, msg, Toast.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">LENGTH_SHORT</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.show()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.d(TAG, msg)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recording?.close()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recording = null<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Log.e(TAG, "Video capture ends with error: " +<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"${</span><span style="font-family: 黑体; font-size: 9.5pt; background: rgb(34, 60, 35); color: rgb(255, 255, 255);"><font face="黑体">recordEvent</font></span><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">error</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}")<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;viewBinding.videoCaptureButton.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">apply </span></i><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">{</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">text </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">= getString(R.string.</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">start_capture</span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">isEnabled </span></i><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">= true<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span></b><b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);"><br /></span></b><span style="font-family: 黑体; font-size: 9.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(255, 255, 255);">}</span><span style="font-family: 黑体; color: rgb(169, 183, 198); font-size: 9.5pt;"><o:p></o:p></span></span></p><p class="MsoNormal"><span style="font-family: 黑体; font-size: 10.5pt;">效果展示<o:p></o:p></span></p><div><span style="font-family: 黑体; font-size: 10.5pt;">初次打开应用请求相机权限</span></div><div><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic2.png" /><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic3.png" /></div><p class="MsoNormal"><span style="font-family: 黑体; font-size: 10.5pt;">进入相机界面<o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic4.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="宋体">点击拍照</font> <font face="宋体">成功拍照并显示照片存储位置</font><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic5.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体">点击摄像按钮变成结束摄像</font> <font face="黑体">在摄像过程中仍然可以进行拍照</font><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic6.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体">点击结束</font> <font face="黑体">成功保存录像并提升储存位置</font><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic7.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><br />