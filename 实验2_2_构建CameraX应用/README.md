<p class="MsoNormal"><b><span style="font-family: 微软雅黑; color: rgb(31, 35, 40); letter-spacing: 0pt; font-size: 12pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="微软雅黑">实验</font><font face="微软雅黑">2_2_构建cameraX应用</font></span></b><span style="mso-spacerun:'yes';font-family:微软雅黑;font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="font-family: 微软雅黑; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">&nbsp;</span><span style="mso-spacerun:'yes';font-family:微软雅黑;font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><p class="MsoNormal" style="margin: 5pt 0pt;"><b><span style="font-family: 微软雅黑; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="微软雅黑">在</font><font face="微软雅黑">activity.xml中设置俩个按钮用于拍摄和录像</font></span></b><span style="mso-spacerun:'yes';font-family:微软雅黑;font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#54a857;">&lt;Button<br /></span><span style="color:#54a857;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/image_capture_button"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width</span><span style="color:#6a8759;">="110dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height</span><span style="color:#6a8759;">="110dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginBottom</span><span style="color:#6a8759;">="50dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginEnd</span><span style="color:#6a8759;">="50dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:elevation</span><span style="color:#6a8759;">="2dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:text</span><span style="color:#6a8759;">="@string/take_photo"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">app</span><span style="color:#bababa;">:layout_constraintBottom_toBottomOf</span><span style="color:#6a8759;">="parent"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">app</span><span style="color:#bababa;">:layout_constraintLeft_toLeftOf</span><span style="color:#6a8759;">="parent"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">app</span><span style="color:#bababa;">:layout_constraintEnd_toStartOf</span><span style="color:#6a8759;">="@id/vertical_centerline" </span><span style="color:#54a857;">/&gt;<br /></span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">&lt;Button<br /></span><span style="color:#54a857;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:id</span><span style="color:#6a8759;">="@+id/video_capture_button"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_width</span><span style="color:#6a8759;">="110dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_height</span><span style="color:#6a8759;">="110dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginBottom</span><span style="color:#6a8759;">="50dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:layout_marginStart</span><span style="color:#6a8759;">="50dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:elevation</span><span style="color:#6a8759;">="2dp"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">android</span><span style="color:#bababa;">:text</span><span style="color:#6a8759;">="@string/start_capture"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">app</span><span style="color:#bababa;">:layout_constraintBottom_toBottomOf</span><span style="color:#6a8759;">="parent"<br /></span><span style="color:#6a8759;">    </span><span style="color:#9876aa;">app</span><span style="color:#bababa;">:layout_constraintStart_toEndOf</span><span style="color:#6a8759;">="@id/vertical_centerline" </span><span style="color:#54a857;">/&gt;</span></pre><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="font-family: 微软雅黑; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">效果图如下</span><span style="mso-spacerun:'yes';font-family:微软雅黑;font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><div><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic1.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><b>关键代码</b><o:p></o:p></span></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;">&nbsp;</span></p><p class="MsoNormal" style="margin: 5pt 0pt;"><b><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="黑体">在</font><font face="黑体">Gradle.app中添加CAMERA依赖组件用于支持相机功能的实现</font></span></b><span style="mso-spacerun:'yes';font-family:黑体;font-size:10.5000pt;
mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">def </span>camerax_version = <span style="color:#6a8759;">"1.1.0-beta02"<br /></span>implementation <span style="color:#6a8759;">'androidx.camera:camera-core:1.1.0-beta02'<br /></span>implementation <span style="color:#6a8759;">'androidx.camera:camera-camera2:1.1.0-beta02'<br /></span>implementation <span style="color:#6a8759;">"androidx.camera:camera-lifecycle:1.1.0-beta02"<br /></span>implementation <span style="color:#6a8759;">"androidx.camera:camera-video:1.1.0-beta02"<br /></span>implementation <span style="color:#6a8759;">"androidx.camera:camera-view:1.1.0-beta02"<br /></span>implementation <span style="color:#6a8759;">"androidx.camera:camera-extensions:1.1.0-beta02"</span></pre><p class="MsoNormal" style="margin: 5pt 0pt;"><b><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="黑体">在</font><font face="黑体">Androidmainfest.xml中添加权限申请</font></span></b><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;">        &lt;uses-feature android:name=<span style="color:#6a8759;">"android.hardware.camera.any" </span>/&gt;<br />        &lt;uses-permission android:name=<span style="color:#6a8759;">"android.permission.CAMERA" </span>/&gt;<br />        &lt;uses-permission android:name=<span style="color:#6a8759;">"android.permission.RECORD_AUDIO" </span>/&gt;<br />        &lt;uses-permission <span style="color:#6a8759;">android</span>:name=<span style="color:#6a8759;">"android.permission.WRITE_EXTERNAL_STORAGE" </span>android:maxSdkVersion=<span style="color:#6a8759;">"28" </span>/&gt;</pre><p class="MsoNormal" style="margin: 5pt 0pt;"><b><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="黑体">在</font><font face="黑体">MainActivity.kt中设定startCamera用于启动摄像机</font></span></b><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">private fun </span><span style="color:#ffc66d;">startCamera</span><span style="color:#e8ba36;">() </span><span style="color:#54a857;">{<br /></span><span style="color:#54a857;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">。创建</span><span style="color:#808080;"> ProcessCameraProvider </span><span style="color:#808080;font-family:'宋体',monospace;">的实例。这用于将相机的生命周期绑定到生命周期所有者。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">这消除了打开和关闭相机的任务，因为</span><span style="color:#808080;"> CameraX </span><span style="color:#808080;font-family:'宋体',monospace;">具有生命周期感知能力。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>cameraProviderFuture = ProcessCameraProvider.getInstance<span style="color:#e8ba36;">(</span><span style="color:#cc7832;">this</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">向</span><span style="color:#808080;"> cameraProviderFuture </span><span style="color:#808080;font-family:'宋体',monospace;">添加监听器。添加</span><span style="color:#808080;"> Runnable </span><span style="color:#808080;font-family:'宋体',monospace;">作为一个参数。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">添加</span><span style="color:#808080;"> ContextCompat.getMainExecutor() </span><span style="color:#808080;font-family:'宋体',monospace;">作为第二个参数。这将返回一个在主线程上运行的</span><span style="color:#808080;"> Executor</span><span style="color:#808080;font-family:'宋体',monospace;">。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span>cameraProviderFuture.addListener<span style="color:#e8ba36;">(</span><span style="font-style:italic;">Runnable</span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">        </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">添加</span><span style="color:#808080;"> ProcessCameraProvider</span><span style="color:#808080;font-family:'宋体',monospace;">。它用于将相机的生命周期绑定到应用进程中的</span><span style="color:#808080;"> LifecycleOwner<br /></span><span style="color:#808080;">        </span><span style="color:#cc7832;">val </span>cameraProvider: ProcessCameraProvider = cameraProviderFuture.get<span style="color:#54a857;">()<br /></span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">        </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">初始化</span><span style="color:#808080;"> Preview </span><span style="color:#808080;font-family:'宋体',monospace;">对象，在其上调用</span><span style="color:#808080;"> build</span><span style="color:#808080;font-family:'宋体',monospace;">，从取景器中获取</span><span style="color:#808080;"> Surface </span><span style="color:#808080;font-family:'宋体',monospace;">提供程序，然后在预览上进行设置。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span><span style="color:#cc7832;">val </span>preview = Preview.Builder<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span>.build<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span>.<span style="color:#ffc66d;font-style:italic;">also </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">                it</span>.setSurfaceProvider<span style="color:#54a857;">(</span><span style="color:#9876aa;">viewBinding</span>.<span style="color:#9876aa;">viewFinder</span>.<span style="color:#9876aa;font-style:italic;">surfaceProvider</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">            </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;">        </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">创建</span><span style="color:#808080;"> VideoCapture </span><span style="color:#808080;font-family:'宋体',monospace;">用例<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span><span style="color:#cc7832;">val </span>recorder = Recorder.Builder<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span>.setQualitySelector<span style="color:#54a857;">(</span>QualitySelector.from<span style="color:#359ff4;">(</span>Quality.<span style="color:#9876aa;font-style:italic;">HIGHEST</span><span style="color:#359ff4;">)</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">            </span>.build<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">        </span><span style="color:#9876aa;">videoCapture </span>= VideoCapture.withOutput<span style="color:#54a857;">(</span>recorder<span style="color:#54a857;">)<br /></span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">        </span><span style="color:#9876aa;">imageCapture </span>= ImageCapture.Builder<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span>.build<span style="color:#54a857;">()<br /></span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">        </span><span style="color:#cc7832;">val </span>imageAnalyzer = ImageAnalysis.Builder<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span>.build<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span>.<span style="color:#ffc66d;font-style:italic;">also </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">                it</span>.setAnalyzer<span style="color:#54a857;">(</span><span style="color:#9876aa;">cameraExecutor</span><span style="color:#cc7832;">, </span>LuminosityAnalyzer <span style="font-weight:bold;">{ </span>luma <span style="font-weight:bold;">-&gt;<br /></span><span style="font-weight:bold;">                    </span>Log.d<span style="color:#359ff4;">(</span><span style="color:#9876aa;">TAG</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"Average luminosity: </span><span style="color:#cc7832;">$</span>luma<span style="color:#6a8759;">"</span><span style="color:#359ff4;">)<br /></span><span style="color:#359ff4;">                </span><span style="font-weight:bold;">}</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">            </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">        </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">创建</span><span style="color:#808080;"> CameraSelector </span><span style="color:#808080;font-family:'宋体',monospace;">对象，然后选择</span><span style="color:#808080;"> DEFAULT_BACK_CAMERA</span><span style="color:#808080;font-family:'宋体',monospace;">。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span><span style="color:#cc7832;">val </span>cameraSelector = CameraSelector.<span style="color:#9876aa;font-style:italic;">DEFAULT_BACK_CAMERA<br /></span><span style="color:#9876aa;font-style:italic;"><br /></span><span style="color:#9876aa;font-style:italic;">        </span><span style="color:#cc7832;">try </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">            </span><span style="color:#808080;">// Unbind use cases before rebinding<br /></span><span style="color:#808080;">            </span>cameraProvider.unbindAll<span style="color:#54a857;">()<br /></span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">            </span><span style="color:#808080;">// Bind use cases to camera<br /></span><span style="color:#808080;">            </span>cameraProvider.bindToLifecycle<span style="color:#54a857;">(</span><span style="color:#cc7832;">this, </span>cameraSelector<span style="color:#cc7832;">, </span>preview<span style="color:#cc7832;">,</span><span style="color:#9876aa;">imageCapture</span><span style="color:#cc7832;">, </span><span style="color:#9876aa;">videoCapture</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;"><br /></span><span style="color:#54a857;">        </span><span style="color:#5060bb;">} </span><span style="color:#cc7832;">catch</span><span style="color:#54a857;">(</span>exc: Exception<span style="color:#54a857;">) </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">            </span>Log.e<span style="color:#54a857;">(</span><span style="color:#9876aa;">TAG</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"Use case binding failed"</span><span style="color:#cc7832;">, </span>exc<span style="color:#54a857;">)<br /></span><span style="color:#54a857;">        </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;"><br /></span><span style="color:#5060bb;">    </span><span style="font-weight:bold;">}</span><span style="color:#cc7832;">, </span>ContextCompat.getMainExecutor<span style="color:#54a857;">(</span><span style="color:#cc7832;">this</span><span style="color:#54a857;">)</span><span style="color:#e8ba36;">)<br /></span><span style="color:#54a857;">}</span></pre><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;">&nbsp;</span></p><p class="MsoNormal" style="margin: 5pt 0pt;"><b><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="黑体">在</font><font face="黑体">MainActivity.kt中设定takePhoto用于拍照</font></span></b><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">private fun </span><span style="color:#ffc66d;">takePhoto</span><span style="color:#e8ba36;">() </span><span style="color:#54a857;">{<br /></span><span style="color:#54a857;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">如果用例为</span><span style="color:#808080;"> null</span><span style="color:#808080;font-family:'宋体',monospace;">，退出函数。如果在设置图片拍摄之前点按</span><span style="color:#808080;">“photo”</span><span style="color:#808080;font-family:'宋体',monospace;">按钮，它将为</span><span style="color:#808080;"> null</span><span style="color:#808080;font-family:'宋体',monospace;">。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">如果没有</span><span style="color:#808080;"> return </span><span style="color:#808080;font-family:'宋体',monospace;">语句，应用会在该用例为</span><span style="color:#808080;"> null </span><span style="color:#808080;font-family:'宋体',monospace;">时崩溃<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>imageCapture = <span style="color:#9876aa;">imageCapture </span>?: <span style="color:#cc7832;">return<br /></span><span style="color:#cc7832;"><br /></span><span style="color:#cc7832;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">创建用于保存图片的</span><span style="color:#808080;"> MediaStore </span><span style="color:#808080;font-family:'宋体',monospace;">内容值。使用时间戳，确保</span><span style="color:#808080;"> MediaStore </span><span style="color:#808080;font-family:'宋体',monospace;">中的显示名是唯一的<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>name = SimpleDateFormat<span style="color:#e8ba36;">(</span><span style="color:#9876aa;">FILENAME_FORMAT</span><span style="color:#cc7832;">, </span>Locale.<span style="color:#9876aa;font-style:italic;">US</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span>.format<span style="color:#e8ba36;">(</span>System.currentTimeMillis<span style="color:#54a857;">()</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">    </span><span style="color:#cc7832;">val </span>contentValues = ContentValues<span style="color:#e8ba36;">()</span>.<span style="color:#ffc66d;font-style:italic;">apply </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">        </span>put<span style="color:#e8ba36;">(</span>MediaStore.MediaColumns.<span style="color:#9876aa;font-style:italic;">DISPLAY_NAME</span><span style="color:#cc7832;">, </span>name<span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span>put<span style="color:#e8ba36;">(</span>MediaStore.MediaColumns.<span style="color:#9876aa;font-style:italic;">MIME_TYPE</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"image/jpeg"</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span><span style="color:#cc7832;">if</span><span style="color:#e8ba36;">(</span>Build.VERSION.<span style="color:#9876aa;font-style:italic;">SDK_INT </span>&gt; Build.VERSION_CODES.<span style="color:#9876aa;font-style:italic;">P</span><span style="color:#e8ba36;">) </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">            </span>put<span style="color:#54a857;">(</span>MediaStore.Images.Media.<span style="color:#9876aa;font-style:italic;">RELATIVE_PATH</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"Pictures/CameraX-Image"</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">        </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;">    </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;"><br /></span><span style="font-weight:bold;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">创建一个</span><span style="color:#808080;"> OutputFileOptions </span><span style="color:#808080;font-family:'宋体',monospace;">对象。在该对象中，可以指定所需的输出内容<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>outputOptions = ImageCapture.OutputFileOptions<br />        .Builder<span style="color:#e8ba36;">(</span><span style="color:#9876aa;font-style:italic;">contentResolver</span><span style="color:#cc7832;">,<br /></span><span style="color:#cc7832;">            </span>MediaStore.Images.Media.<span style="color:#9876aa;font-style:italic;">EXTERNAL_CONTENT_URI</span><span style="color:#cc7832;">,<br /></span><span style="color:#cc7832;">            </span>contentValues<span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span>.build<span style="color:#e8ba36;">()<br /></span><span style="color:#e8ba36;"><br /></span><span style="color:#e8ba36;">    </span><span style="color:#808080;">// imageCapture </span><span style="color:#808080;font-family:'宋体',monospace;">对象调用</span><span style="color:#808080;"> takePicture()</span><span style="color:#808080;font-family:'宋体',monospace;">。传入</span><span style="color:#808080;"> outputOptions</span><span style="color:#808080;font-family:'宋体',monospace;">、执行器和保存图片时使用的回调<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span>imageCapture.takePicture<span style="color:#e8ba36;">(<br /></span><span style="color:#e8ba36;">        </span>outputOptions<span style="color:#cc7832;">,<br /></span><span style="color:#cc7832;">        </span>ContextCompat.getMainExecutor<span style="color:#54a857;">(</span><span style="color:#cc7832;">this</span><span style="color:#54a857;">)</span><span style="color:#cc7832;">,<br /></span><span style="color:#cc7832;">        object </span>: ImageCapture.OnImageSavedCallback <span style="color:#359ff4;">{<br /></span><span style="color:#359ff4;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">如果图片拍摄失败或保存图片失败，添加错误情况以记录失败。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">            </span><span style="color:#cc7832;">override fun </span><span style="color:#ffc66d;">onError</span><span style="color:#54a857;">(</span>exc: ImageCaptureException<span style="color:#54a857;">) </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">                </span>Log.e<span style="color:#54a857;">(</span><span style="color:#9876aa;">TAG</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"Photo capture failed: </span><span style="color:#e8ba36;">${</span>exc.<span style="color:#9876aa;">message</span><span style="color:#e8ba36;">}</span><span style="color:#6a8759;">"</span><span style="color:#cc7832;">, </span>exc<span style="color:#54a857;">)<br /></span><span style="color:#54a857;">            </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">如果拍摄未失败，即表示照片拍摄成功！将照片保存到之前创建的文件中，<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#808080;">// </span><span style="color:#808080;font-family:'宋体',monospace;">显示消息框，让用户知道照片已拍摄成功，并输出日志语句。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">            </span><span style="color:#cc7832;">override fun<br /></span><span style="color:#cc7832;">                    </span><span style="color:#ffc66d;">onImageSaved</span><span style="color:#54a857;">(</span>output: ImageCapture.OutputFileResults<span style="color:#54a857;">)</span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">                </span><span style="color:#cc7832;">val </span>msg = <span style="color:#6a8759;">"Photo capture succeeded: </span><span style="color:#e8ba36;">${</span>output.<span style="color:#9876aa;font-style:italic;">savedUri</span><span style="color:#e8ba36;">}</span><span style="color:#6a8759;">"<br /></span><span style="color:#6a8759;">                </span>Toast.makeText<span style="color:#54a857;">(</span><span style="color:#9876aa;font-style:italic;">baseContext</span><span style="color:#cc7832;">, </span>msg<span style="color:#cc7832;">, </span>Toast.<span style="color:#9876aa;font-style:italic;">LENGTH_SHORT</span><span style="color:#54a857;">)</span>.show<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">                </span>Log.d<span style="color:#54a857;">(</span><span style="color:#9876aa;">TAG</span><span style="color:#cc7832;">, </span>msg<span style="color:#54a857;">)<br /></span><span style="color:#54a857;">            </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;">        </span><span style="color:#359ff4;">}<br /></span><span style="color:#359ff4;">    </span><span style="color:#e8ba36;">)<br /></span><span style="color:#54a857;">}</span></pre><p class="MsoNormal" style="margin: 5pt 0pt;"><b><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="黑体">在</font><font face="黑体">MainActivity.kt中设定startcamera用于拍摄录像</font></span></b><span style="mso-spacerun:'yes';font-family:Calibri;mso-fareast-font-family:宋体;
mso-bidi-font-family:'Times New Roman';font-size:10.5000pt;mso-font-kerning:1.0000pt;"><o:p></o:p></span></p><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'JetBrains Mono',monospace;font-size:9.8pt;"><span style="color:#cc7832;">private fun </span><span style="color:#ffc66d;">captureVideo</span><span style="color:#e8ba36;">() </span><span style="color:#54a857;">{<br /></span><span style="color:#54a857;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">检查是否已创建</span><span style="color:#808080;"> VideoCapture </span><span style="color:#808080;font-family:'宋体',monospace;">用例：如果尚未创建，则不执行任何操作。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>videoCapture = <span style="color:#cc7832;">this</span>.<span style="color:#9876aa;">videoCapture </span>?: <span style="color:#cc7832;">return<br /></span><span style="color:#cc7832;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">在</span><span style="color:#808080;"> CameraX </span><span style="color:#808080;font-family:'宋体',monospace;">完成请求操作之前，停用界面；在后续步骤中，它会在已注册的</span><span style="color:#808080;"> VideoRecordListener </span><span style="color:#808080;font-family:'宋体',monospace;">内重新启用。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#9876aa;">viewBinding</span>.<span style="color:#9876aa;">videoCaptureButton</span>.<span style="color:#9876aa;font-style:italic;">isEnabled </span>= <span style="color:#cc7832;">false<br /></span><span style="color:#cc7832;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">如果有正在进行的录制操作，将其停止并释放当前的</span><span style="color:#808080;"> recording</span><span style="color:#808080;font-family:'宋体',monospace;">。当所捕获的视频文件可供应用使用时，我们会收到通知。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>curRecording = <span style="color:#9876aa;">recording<br /></span><span style="color:#9876aa;">    </span><span style="color:#cc7832;">if </span><span style="color:#e8ba36;">(</span>curRecording != <span style="color:#cc7832;">null</span><span style="color:#e8ba36;">) </span><span style="color:#359ff4;">{<br /></span><span style="color:#359ff4;">        </span><span style="color:#808080;">// Stop the current recording session.<br /></span><span style="color:#808080;">        </span><span style="background-color:#223c23;">curRecording</span>.stop<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">        </span><span style="color:#9876aa;">recording </span>= <span style="color:#cc7832;">null<br /></span><span style="color:#cc7832;">        return<br /></span><span style="color:#cc7832;">    </span><span style="color:#359ff4;">}<br /></span><span style="color:#359ff4;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">为了开始录制，创建一个新的录制会话。首先，创建预定的</span><span style="color:#808080;"> MediaStore </span><span style="color:#808080;font-family:'宋体',monospace;">视频内容对象，将系统时间戳作为显示名（以便可以捕获多个视频）<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>name = SimpleDateFormat<span style="color:#e8ba36;">(</span><span style="color:#9876aa;">FILENAME_FORMAT</span><span style="color:#cc7832;">, </span>Locale.<span style="color:#9876aa;font-style:italic;">US</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span>.format<span style="color:#e8ba36;">(</span>System.currentTimeMillis<span style="color:#54a857;">()</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">    </span><span style="color:#cc7832;">val </span>contentValues = ContentValues<span style="color:#e8ba36;">()</span>.<span style="color:#ffc66d;font-style:italic;">apply </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">        </span>put<span style="color:#e8ba36;">(</span>MediaStore.MediaColumns.<span style="color:#9876aa;font-style:italic;">DISPLAY_NAME</span><span style="color:#cc7832;">, </span>name<span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span>put<span style="color:#e8ba36;">(</span>MediaStore.MediaColumns.<span style="color:#9876aa;font-style:italic;">MIME_TYPE</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"video/mp4"</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span><span style="color:#cc7832;">if </span><span style="color:#e8ba36;">(</span>Build.VERSION.<span style="color:#9876aa;font-style:italic;">SDK_INT </span>&gt; Build.VERSION_CODES.<span style="color:#9876aa;font-style:italic;">P</span><span style="color:#e8ba36;">) </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">            </span>put<span style="color:#54a857;">(</span>MediaStore.Video.Media.<span style="color:#9876aa;font-style:italic;">RELATIVE_PATH</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"Movies/CameraX-Video"</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">        </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;">    </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">使用外部内容选项创建</span><span style="color:#808080;"> MediaStoreOutputOptions.Builder</span><span style="color:#808080;font-family:'宋体',monospace;">。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#cc7832;">val </span>mediaStoreOutputOptions = MediaStoreOutputOptions<br />        .Builder<span style="color:#e8ba36;">(</span><span style="color:#9876aa;font-style:italic;">contentResolver</span><span style="color:#cc7832;">, </span>MediaStore.Video.Media.<span style="color:#9876aa;font-style:italic;">EXTERNAL_CONTENT_URI</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">将创建的视频</span><span style="color:#808080;"> contentValues </span><span style="color:#808080;font-family:'宋体',monospace;">设置为</span><span style="color:#808080;"> MediaStoreOutputOptions.Builder</span><span style="color:#808080;font-family:'宋体',monospace;">，并构建我们的</span><span style="color:#808080;"> MediaStoreOutputOptions </span><span style="color:#808080;font-family:'宋体',monospace;">实例。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span>.setContentValues<span style="color:#e8ba36;">(</span>contentValues<span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">        </span>.build<span style="color:#e8ba36;">()<br /></span><span style="color:#e8ba36;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">将输出选项配置为</span><span style="color:#808080;"> VideoCapture </span><span style="color:#808080;font-family:'宋体',monospace;">的</span><span style="color:#808080;"> Recorder </span><span style="color:#808080;font-family:'宋体',monospace;">并启用录音：<br /></span><span style="color:#808080;font-family:'宋体',monospace;">    </span><span style="color:#9876aa;">recording </span>= videoCapture.<span style="color:#9876aa;font-style:italic;">output<br /></span><span style="color:#9876aa;font-style:italic;">        </span>.prepareRecording<span style="color:#e8ba36;">(</span><span style="color:#cc7832;">this, </span>mediaStoreOutputOptions<span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">在此录音中启用音频<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span>.<span style="color:#ffc66d;font-style:italic;">apply </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">            </span><span style="color:#cc7832;">if </span><span style="color:#e8ba36;">(</span>PermissionChecker.checkSelfPermission<span style="color:#54a857;">(</span><span style="color:#cc7832;">this</span><span style="color:#467cda;">@MainActivity</span><span style="color:#cc7832;">,<br /></span><span style="color:#cc7832;">                    </span>Manifest.permission.<span style="color:#9876aa;font-style:italic;">RECORD_AUDIO</span><span style="color:#54a857;">) </span>==<br />                PermissionChecker.<span style="color:#9876aa;font-style:italic;">PERMISSION_GRANTED</span><span style="color:#e8ba36;">)<br /></span><span style="color:#e8ba36;">            </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">                </span>withAudioEnabled<span style="color:#54a857;">()<br /></span><span style="color:#54a857;">            </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;">        </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">启动这项新录制内容，并注册一个</span><span style="color:#808080;"> lambda VideoRecordEvent </span><span style="color:#808080;font-family:'宋体',monospace;">监听器。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">        </span>.start<span style="color:#e8ba36;">(</span>ContextCompat.getMainExecutor<span style="color:#54a857;">(</span><span style="color:#cc7832;">this</span><span style="color:#54a857;">)</span><span style="color:#e8ba36;">) </span><span style="font-weight:bold;">{ </span>recordEvent <span style="font-weight:bold;">-&gt;<br /></span><span style="font-weight:bold;">            </span><span style="color:#cc7832;">when</span><span style="color:#e8ba36;">(</span>recordEvent<span style="color:#e8ba36;">) </span><span style="color:#5060bb;">{<br /></span><span style="color:#5060bb;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">当相机设备开始请求录制时，将</span><span style="color:#808080;">“Start Capture”</span><span style="color:#808080;font-family:'宋体',monospace;">按钮文本切换为</span><span style="color:#808080;">“Stop Capture”</span><span style="color:#808080;font-family:'宋体',monospace;">。<br /></span><span style="color:#808080;font-family:'宋体',monospace;">                </span><span style="color:#cc7832;">is </span>VideoRecordEvent.Start -&gt; <span style="color:#179387;">{<br /></span><span style="color:#179387;">                    </span><span style="color:#9876aa;">viewBinding</span>.<span style="color:#9876aa;">videoCaptureButton</span>.<span style="color:#ffc66d;font-style:italic;">apply </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">                        </span><span style="color:#9876aa;font-style:italic;">text </span>= getString<span style="color:#54a857;">(</span>R.string.<span style="color:#9876aa;font-style:italic;">stop_capture</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">                        </span><span style="color:#9876aa;font-style:italic;">isEnabled </span>= <span style="color:#cc7832;">true<br /></span><span style="color:#cc7832;">                    </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;">                </span><span style="color:#179387;">}<br /></span><span style="color:#179387;">    </span><span style="color:#808080;">//</span><span style="color:#808080;font-family:'宋体',monospace;">完成录制后，用消息框通知用户，并将</span><span style="color:#808080;">“Stop Capture”</span><span style="color:#808080;font-family:'宋体',monospace;">按钮切换回</span><span style="color:#808080;">“Start Capture”</span><span style="color:#808080;font-family:'宋体',monospace;">，然后重新启用它：<br /></span><span style="color:#808080;font-family:'宋体',monospace;">                </span><span style="color:#cc7832;">is </span>VideoRecordEvent.Finalize -&gt; <span style="color:#179387;">{<br /></span><span style="color:#179387;">                    </span><span style="color:#cc7832;">if </span><span style="color:#54a857;">(</span>!<span style="background-color:#223c23;">recordEvent</span>.hasError<span style="color:#359ff4;">()</span><span style="color:#54a857;">) </span><span style="color:#e8ba36;">{<br /></span><span style="color:#e8ba36;">                        </span><span style="color:#cc7832;">val </span>msg = <span style="color:#6a8759;">"Video capture succeeded: " </span>+<br />                                <span style="color:#6a8759;">"</span><span style="color:#e8ba36;">${</span><span style="background-color:#223c23;">recordEvent</span>.<span style="color:#9876aa;font-style:italic;">outputResults</span>.<span style="color:#9876aa;font-style:italic;">outputUri</span><span style="color:#e8ba36;">}</span><span style="color:#6a8759;">"<br /></span><span style="color:#6a8759;">                        </span>Toast.makeText<span style="color:#359ff4;">(</span><span style="color:#9876aa;font-style:italic;">baseContext</span><span style="color:#cc7832;">, </span>msg<span style="color:#cc7832;">, </span>Toast.<span style="color:#9876aa;font-style:italic;">LENGTH_SHORT</span><span style="color:#359ff4;">)<br /></span><span style="color:#359ff4;">                            </span>.show<span style="color:#359ff4;">()<br /></span><span style="color:#359ff4;">                        </span>Log.d<span style="color:#359ff4;">(</span><span style="color:#9876aa;">TAG</span><span style="color:#cc7832;">, </span>msg<span style="color:#359ff4;">)<br /></span><span style="color:#359ff4;">                    </span><span style="color:#e8ba36;">} </span><span style="color:#cc7832;">else </span><span style="color:#e8ba36;">{<br /></span><span style="color:#e8ba36;">                        </span><span style="color:#9876aa;">recording</span>?.close<span style="color:#359ff4;">()<br /></span><span style="color:#359ff4;">                        </span><span style="color:#9876aa;">recording </span>= <span style="color:#cc7832;">null<br /></span><span style="color:#cc7832;">                        </span>Log.e<span style="color:#359ff4;">(</span><span style="color:#9876aa;">TAG</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">"Video capture ends with error: " </span>+<br />                                <span style="color:#6a8759;">"</span><span style="color:#e8ba36;">${</span><span style="background-color:#223c23;">recordEvent</span>.<span style="color:#9876aa;font-style:italic;">error</span><span style="color:#e8ba36;">}</span><span style="color:#6a8759;">"</span><span style="color:#359ff4;">)<br /></span><span style="color:#359ff4;">                    </span><span style="color:#e8ba36;">}<br /></span><span style="color:#e8ba36;">                    </span><span style="color:#9876aa;">viewBinding</span>.<span style="color:#9876aa;">videoCaptureButton</span>.<span style="color:#ffc66d;font-style:italic;">apply </span><span style="font-weight:bold;">{<br /></span><span style="font-weight:bold;">                        </span><span style="color:#9876aa;font-style:italic;">text </span>= getString<span style="color:#54a857;">(</span>R.string.<span style="color:#9876aa;font-style:italic;">start_capture</span><span style="color:#54a857;">)<br /></span><span style="color:#54a857;">                        </span><span style="color:#9876aa;font-style:italic;">isEnabled </span>= <span style="color:#cc7832;">true<br /></span><span style="color:#cc7832;">                    </span><span style="font-weight:bold;">}<br /></span><span style="font-weight:bold;">                </span><span style="color:#179387;">}<br /></span><span style="color:#179387;">            </span><span style="color:#5060bb;">}<br /></span><span style="color:#5060bb;">        </span><span style="font-weight:bold;">}<br /></span><span style="color:#54a857;">}</span></pre><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">效果展示</span><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><o:p></o:p></span></p><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">初次打开应用请求相机权限</span><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><o:p></o:p></span></p><div><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic2.png" /><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic3.png" /></div><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">进入相机界面</span><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic4.png" /></p><p class="MsoNormal" style="margin: 5pt 0pt;"><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><font face="黑体">点击拍照</font><font face="宋体">&nbsp;</font><font face="黑体">成功拍照并显示照片存储位置</font></span><span style="font-family: 黑体; letter-spacing: 0pt; font-size: 10.5pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic5.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体">点击摄像按钮变成结束摄像</font> <font face="黑体">在摄像过程中仍然可以进行拍照</font><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic6.png" /></p><p class="MsoNormal"><span style="font-size: 10.5pt; font-family: &quot;Microsoft Yahei&quot;;"><font face="黑体">点击结束</font> <font face="黑体">成功保存录像并提升储存位置</font><o:p></o:p></span></p><p class="MsoNormal"><img src="https://github.com/itisnotarobot/AndroidProject/blob/main/%E5%AE%9E%E9%AA%8C2_2_%E6%9E%84%E5%BB%BACameraX%E5%BA%94%E7%94%A8/images/pic7.png" /></p><p class="MsoNormal"><br /></p></div><br /><br /><br /><br />